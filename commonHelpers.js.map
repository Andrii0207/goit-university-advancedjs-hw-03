{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/service.js","../src/index.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = 'https://api.thecatapi.com/v1';\nconst API_KEY = 'live_5by06OFwHheRUp9VstzvBimzl4BKirSYssLaw602WJRBzfwsIyF76sXRpAIxqc7F';\n\n// axios.defaults.headers.common[\"x-api-key\"] = API_KEY;\n\nconst API = axios.create({\n    baseURL: BASE_URL,\n    headers: {\n        common: {\n            \"x-api-key\": API_KEY,\n        }\n    }\n})\n\nfunction fetchBreeds() {\n    return API.get('/breeds')\n}\n\nfunction fetchCatByBreed(breedId) {\n    return API.get('images/search', {\n        params: {\n            breed_ids: breedId,\n            order: \"ASC\",\n        }\n    })\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n\n","import iziToast from 'izitoast';\n\n\nfunction iziToastError() {\n    iziToast.error({\n        title: \"ERROR\",\n        message: `Oops! Something went wrong! Try reloading the page!`,\n        timeout: 3000,\n        position: \"topCenter\",\n    })\n}\n\n// function isLoading(loading) {\n//     // refs.loader.style.display = \"none\"\n\n//     if (loading) {\n//         return refs.loader.classList.toggle(\"visually-hidden\")\n//     }\n// }\n\nexport { iziToastError };","import \"izitoast/dist/css/iziToast.min.css\";\nimport SlimSelect from 'slim-select'\nimport { fetchBreeds, fetchCatByBreed } from \"./cat-api.js\";\nimport { iziToastError } from \"./service.js\"\n\nconst refs = {\n    select: document.querySelector('.breed-select'),\n    loader: document.querySelector('.loader'),\n    error: document.querySelector('.error'),\n    catInfo: document.querySelector('.cat-info'),\n}\n\nconst PLACE_HOLDER = \"choose a cat\";\n\nconst slimSelect = new SlimSelect({\n    select: refs.select,\n})\n\nrefs.select.addEventListener(\"change\", onChangeSelect)\n\nfetchBreeds()\n    .then(({ data }) => {\n        refs.select.innerHTML = ('beforeend', setSelectData(data))\n    })\n    .catch(err => {\n        iziToastError(err)\n        refs.error.style.display = \"block\";\n        return;\n    })\n    .finally(() => {\n        refs.loader.style.display = \"none\";\n        refs.error.style.display = \"none\";\n    });\n\nfunction setSelectData(data) {\n    const selectsData = data.map(({ id, name }) => ({ text: name, value: id }))\n    return slimSelect.setData(\n        [{ 'placeholder': true, 'text': PLACE_HOLDER }, ...selectsData]\n    )\n}\n\nfunction onChangeSelect(evt) {\n    refs.catInfo.innerHTML = \"\";\n    refs.loader.style.display = \"block\";\n    const selectedBreed = evt.target.value;\n\n    if (selectedBreed === PLACE_HOLDER) return\n\n    fetchCatByBreed(selectedBreed)\n        .then(resp => {\n            const data = resp.data[0];\n            createMarkup({ breeds: data.breeds[0], url: data.url });\n        })\n        .catch(err => console.log(err))\n        .finally(() => refs.loader.style.display = \"none\");\n};\n\nfunction createMarkup({ breeds, url }) {\n    const { name, description, temperament } = breeds;\n\n    const markupCatInfo = `<div class=\"wrapper-card\">\n      <img class=\"image-cat\" src=\"${url}\" alt=\"${name}\" width=\"600\" />\n      <div class=\"wrapper-info\">\n        <h2 class=\"name-cat\">${name}</h2>\n        <p class=\"description-cat\">${description}</p>\n        <p class=\"temperament-cat\"><b>Temperament:</b> ${temperament}</p>\n      </div>\n    </div>`\n    refs.catInfo.innerHTML = markupCatInfo;\n}\n"],"names":["BASE_URL","API_KEY","API","axios","fetchBreeds","fetchCatByBreed","breedId","iziToastError","iziToast","refs","PLACE_HOLDER","slimSelect","SlimSelect","onChangeSelect","data","setSelectData","err","selectsData","id","name","evt","selectedBreed","resp","createMarkup","breeds","url","description","temperament","markupCatInfo"],"mappings":"owBAEA,MAAMA,EAAW,+BACXC,EAAU,wEAIVC,EAAMC,EAAM,OAAO,CACrB,QAASH,EACT,QAAS,CACL,OAAQ,CACJ,YAAaC,CAChB,CACJ,CACL,CAAC,EAED,SAASG,GAAc,CACnB,OAAOF,EAAI,IAAI,SAAS,CAC5B,CAEA,SAASG,EAAgBC,EAAS,CAC9B,OAAOJ,EAAI,IAAI,gBAAiB,CAC5B,OAAQ,CACJ,UAAWI,EACX,MAAO,KACV,CACT,CAAK,CACL,CCxBA,SAASC,GAAgB,CACrBC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,sDACT,QAAS,IACT,SAAU,WAClB,CAAK,CACL,CCLA,MAAMC,EAAO,CACT,OAAQ,SAAS,cAAc,eAAe,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,QAAQ,EACtC,QAAS,SAAS,cAAc,WAAW,CAC/C,EAEMC,EAAe,eAEfC,EAAa,IAAIC,EAAW,CAC9B,OAAQH,EAAK,MACjB,CAAC,EAEDA,EAAK,OAAO,iBAAiB,SAAUI,CAAc,EAErDT,EAAa,EACR,KAAK,CAAC,CAAE,KAAAU,KAAW,CAChBL,EAAK,OAAO,UAA0BM,EAAcD,CAAI,CAChE,CAAK,EACA,MAAME,GAAO,CACVT,EAAiB,EACjBE,EAAK,MAAM,MAAM,QAAU,OAEnC,CAAK,EACA,QAAQ,IAAM,CACXA,EAAK,OAAO,MAAM,QAAU,OAC5BA,EAAK,MAAM,MAAM,QAAU,MACnC,CAAK,EAEL,SAASM,EAAcD,EAAM,CACzB,MAAMG,EAAcH,EAAK,IAAI,CAAC,CAAE,GAAAI,EAAI,KAAAC,MAAY,CAAE,KAAMA,EAAM,MAAOD,CAAI,EAAC,EAC1E,OAAOP,EAAW,QACd,CAAC,CAAE,YAAe,GAAM,KAAQD,CAAY,EAAI,GAAGO,CAAW,CACjE,CACL,CAEA,SAASJ,EAAeO,EAAK,CACzBX,EAAK,QAAQ,UAAY,GACzBA,EAAK,OAAO,MAAM,QAAU,QAC5B,MAAMY,EAAgBD,EAAI,OAAO,MAE7BC,IAAkBX,GAEtBL,EAAgBgB,CAAa,EACxB,KAAKC,GAAQ,CACV,MAAMR,EAAOQ,EAAK,KAAK,GACvBC,EAAa,CAAE,OAAQT,EAAK,OAAO,GAAI,IAAKA,EAAK,GAAG,CAAE,CAClE,CAAS,EACA,MAAME,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAC7B,QAAQ,IAAMP,EAAK,OAAO,MAAM,QAAU,MAAM,CACzD,CAEA,SAASc,EAAa,CAAE,OAAAC,EAAQ,IAAAC,GAAO,CACnC,KAAM,CAAE,KAAAN,EAAM,YAAAO,EAAa,YAAAC,CAAW,EAAKH,EAErCI,EAAgB;AAAA,oCACUH,WAAaN;AAAA;AAAA,+BAElBA;AAAA,qCACMO;AAAA,yDACoBC;AAAA;AAAA,YAGrDlB,EAAK,QAAQ,UAAYmB,CAC7B"}